(()=>{var a={4417:()=>{window.jQuery(document).ready(function(o){var t=wp.i18n,s=t.__,e=t._x,a=t._n,r=t._nx;o(document).on("click",".tutor-attachment-cards:not(.tutor-no-control) .tutor-delete-attachment",function(t){t.preventDefault();o(this).closest("[data-attachment_id]").remove()});o(document).on("click",".tutorUploadAttachmentBtn",function(t){t.preventDefault();var r=o(this);var i=r.data("name");var e=r.parent().find(".tutor-attachment-cards");var n;if(n){n.open();return}n=wp.media({title:s("Select or Upload Media Of Your Choice","tutor"),button:{text:s("Upload media","tutor")},multiple:true});n.on("select",function(){var t=n.state().get("selection").toJSON();if(t.length){for(var e=0;e<t.length;e++){var o=t[e];var a='<div class="tutor-col-lg-6 tutor-col-xl-4 tutor-mb-16" data-attachment_id="'.concat(o.id,'">\n                        <div class="tutor-card">\n                            <div class="tutor-card-body">\n                                <div class="tutor-row tutor-align-center">\n                                    <div class="tutor-col tutor-overflow-hidden">\n                                        <div class="tutor-fs-6 tutor-fw-medium tutor-color-black tutor-text-ellipsis tutor-mb-4">').concat(o.filename,'</div>\n                                        <div class="tutor-fs-7 tutor-color-muted">').concat(s("Size","tutor"),": ").concat(o.filesizeHumanReadable,'</div>\n                                        <input type="hidden" name="').concat(i,'" value="').concat(o.id,'">\n                                    </div>\n\n                                    <div class="tutor-col-auto">\n                                        <span class="tutor-delete-attachment tutor-iconic-btn tutor-iconic-btn-secondary" role="button">\n                                            <span class="tutor-icon-times" area-hidden="true"></span>\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>');r.parent().find(".tutor-attachment-cards").append(a)}}});n.open()})})},7464:()=>{function i(t,e,o){if(e in t){Object.defineProperty(t,e,{value:o,enumerable:true,configurable:true,writable:true})}else{t[e]=o}return t}window.jQuery(document).ready(function(a){var t=a("#course_setting_content_drip");var r=a("div.content-drip-options-wrapper");if(t.is(":checked")===false){r.hide()}a('#course_setting_content_drip, [name="_tutor_course_settings[content_drip_type]"]').change(function(){var t;if(a(this).attr("type")=="radio"&&!a(this).prop("checked")){return}var e=a(this).attr("type")=="checkbox"?a(this).prop("checked")?1:0:a(this).val();var o=a(this).is(":checked");o?r.show():r.hide();a.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:(t={},i(t,a(this).attr("name"),e),i(t,"course_id",a("#post_ID").val()),i(t,"action","tutor_content_drip_state_update"),t)})})})},7509:()=>{document.addEventListener("DOMContentLoaded",function(){var u=wp.i18n.__;var t=document.getElementById("tutor-attach-product");if(t){t.onchange=function(t){var r=t.target;if(r.tagName==="SELECT"&&r.id==="tutor-wc-product-select"){var i=r.value;var n=r.dataset.productId;var s=r.nextElementSibling;if(!i)return;if(i==n){return}var e={action:"tutor_get_wc_product",product_id:i,course_id:r.dataset.courseId};jQuery.ajax({url:_tutorobject.ajaxurl,type:"POST",dataType:"json",data:e,success:function t(e){var t=e.success,o=e.data;if(t){jQuery('input[name="course_price"]').val(e.data.regular_price);jQuery('input[name="course_sale_price"]').val(e.data.sale_price);r.dataset.productId=i}if(!t){tutor_toast(u("Failed","tutor"),u(o,"tutor"),"error");r.value=n==0?"-1":n;r.dataset.productId=n==0?0:n;if(s){var a=s.querySelector("span.tutor-form-select-label");if(a){a.innerHTML=n==0?u("Select a product","tutor"):r.options[r.selectedIndex].text;a.dataset.value=n==0?"-1":n}}}}})}}}var e=jQuery('input[name="tutor_course_price_type"]');var o=function t(e){var o=jQuery(".tutor-course-product-fields");"free"===e?o.hide():o.show()};var a=e.filter(":checked").val();o(a);setTimeout(function(){e.change(function(t){o(jQuery(this).val())})});var r=jQuery('input[name="course_sale_price"]').val();jQuery('input[name="course_sale_price"]').on("blur",function(){var t=jQuery('input[name="course_price"]').val();var e=jQuery(this).val();if(Number(e)>=Number(t)){tutor_toast(u("Invalid Sale Price","tutor"),u("Sale price must be smaller than regular price","tutor"),"error");jQuery('input[name="course_sale_price"]').val(r)}});var i=document.querySelectorAll(".tutor-course-price-toggle input[type='radio']");var n=document.querySelector(".tutor-course-price-row");i.forEach(function(t){t.addEventListener("change",function(t){if(t.target.value==="paid"&&!n.classList.contains("is-paid")){n.classList.add("is-paid")}else{n.classList.remove("is-paid")}})})})},4498:()=>{window.jQuery(document).ready(function(u){var t=wp.i18n.__;var c=u("#tutor_course_instructor_modal .tutor-search-result");var d=u("#tutor_course_instructor_modal .tutor-selected-result");var i=u("#tutor_course_instructor_modal").data("course_id");var n;var e=function t(r,s){var e=function t(){n=undefined;var e=u('#tutor_course_instructor_modal input[type="text"]');var o=(e.val()||"").trim();if(!o){c.empty();return}var a=[];d.find("[data-instructor-id]").each(function(){a.push(u(this).data("instructor-id"))});r&&!isNaN(r)?a.push(r):0;u.ajax({url:_tutorobject.ajaxurl,type:"POST",data:{course_id:i,search_terms:o,shortlisted:a,action:"tutor_course_instructor_search"},beforeSend:function t(){if(!s){c.html("");c.addClass("is-loading")}},success:function t(e){var o=e.data||{},a=o.search_result,r=o.shortlisted,i=o.shortlisted_count;c.removeClass("is-loading");c.html(a);d.html(r);var n=i?false:true;u(".add_instructor_to_course_btn").prop("disabled",n);s?s():0}})};if(n){clearTimeout(n)}n=setTimeout(e,350)};u(document).on("input",'#tutor_course_instructor_modal input[type="text"]',e);u(document).on("focus",'#tutor_course_instructor_modal input[type="text"]',function(){c.show()});u(document).on("click","#tutor_course_instructor_modal .tutor-shortlist-instructor",function(){u(this).addClass("is-loading");e(u(this).closest("[data-user_id]").data("user_id"),function(){c.hide()})});u(document).on("click","#tutor_course_instructor_modal .tutor-selected-result .instructor-control a",function(){u(this).closest(".added-instructor-item").fadeOut(function(){u(this).remove()})});u(document).on("click",".add_instructor_to_course_btn",function(t){t.preventDefault();var e=u(this);var o=u("#tutor_course_instructor_modal").data("course_id");var a=[];d.find("[data-instructor-id]").each(function(){a.push(u(this).data("instructor-id"))});u.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:o,tutor_instructor_ids:a,action:"tutor_add_instructors_to_course"},beforeSend:function t(){e.addClass("is-loading")},success:function t(e){if(e.success){c.empty();d.empty();u("#tutor_course_instructor_modal").removeClass("tutor-is-active");u("body").removeClass("tutor-modal-open");u(".tutor-course-instructors-metabox-wrap").parent().html(e.data.output);u(".tutor-modal-wrap").removeClass("show");return}tutor_toast("Error!",get_response_message(e),"error")},complete:function t(){e.removeClass("is-loading")}})});u(document).on("click",".tutor-instructor-delete-btn",function(t){t.preventDefault();var o=u(this);var e=u("#post_ID").val();var a=o.closest(".added-instructor-item").attr("data-instructor-id");u.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:e,instructor_id:a,action:"detach_instructor_from_course"},beforeSend:function t(){return o.addClass("is-loading")},complete:function t(){return o.removeClass("is-loading")},success:function t(e){if(e.success){o.closest(".added-instructor-item").remove();return}tutor_toast("Error!",get_response_message(e),"error")}})})})},8005:()=>{window.jQuery(document).ready(function(l){var _=wp.i18n.__;l(document).on("click",".tutor-save-topic-btn",function(t){t.preventDefault();var u=l(this);var c=u.closest(".tutor-modal");var d=c.find('[name="topic_id"]').val();var e=c.find('[name="topic_title"]').val();var o=c.find('[name="topic_summery"]').val();var a=c.find('[name="topic_course_id"]').val();var r={topic_title:e,topic_summery:o,topic_id:d,topic_course_id:a,action:"tutor_save_topic"};l.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:r,beforeSend:function t(){u.addClass("is-loading")},success:function t(e){var o=e.data,a=o===void 0?{}:o,t=e.success;var r=a.message,i=r===void 0?_("Something Went Wrong!","tutor"):r,n=a.course_contents,s=a.topic_title;if(!t){tutor_toast("Error!",i,"error");return}c.removeClass("tutor-is-active");if(d){u.closest(".tutor-topics-wrap").find("span.topic-inner-title").text(s)}else{l("#tutor-course-content-wrap").html(n);c.find('[name="topic_title"]').val("");c.find('[name="topic_summery"]').val("");enable_sorting_topic_lesson()}window.dispatchEvent(new Event(_tutorobject.content_change_event))},complete:function t(){u.removeClass("is-loading");l("body").removeClass("tutor-modal-open")}})});l(document).on("click",".tutor-topics-wrap [action-delete-course-topic]",function(t){var e=l(this);var o=l(this).closest(".tutor-topics-wrap");var a=o.attr("data-topic-id");if(!confirm(_("Are you sure to delete the topic?","tutor"))){return}l.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{action:"tutor_delete_topic",topic_id:a},beforeSend:function t(){e.addClass("is-loading")},success:function t(e){if(e.success){o.remove();return}tutor_toast("Error!",(e.data||{}).message||_("Something Went Wrong","tutor"),"error")},complete:function t(){e.removeClass("is-loading")}})});l(document).on("click",".topic-inner-title, .expand-collapse-wrap",function(t){t.preventDefault();var e=l(this).closest(".tutor-topics-wrap");e.find(".tutor-topics-body").slideToggle();e.find(".expand-collapse-wrap").toggleClass("is-expanded").find("i").toggleClass("tutor-icon-angle-down tutor-icon-angle-up")})})},3008:()=>{window.jQuery(document).ready(function(r){var i=wp.i18n.__;r(document).on("click",".video_source_wrap_html5 .tutor-attachment-cards .tutor-delete-attachment",function(){r(this).closest(".video_source_wrap_html5").removeClass("tutor-has-video").find("input.input_source_video_id").val("")});r(document).on("click",".video_source_wrap_html5 .video_upload_btn",function(t){t.preventDefault();var e=r(this).closest(".video_source_wrap_html5");var o=e.find(".tutor-attachment-cards");var a;if(a){a.open();return}a=wp.media({title:i("Select or Upload Media Of Your Choice","tutor"),button:{text:i("Upload media","tutor")},library:{type:"video"},multiple:false});a.on("select",function(){var t=a.state().get("selection").first().toJSON();o.find(".filename").text(t.name).attr("href",t.url);o.find(".filesize").text(t.filesizeHumanReadable);e.find("input.input_source_video_id").val(t.id).data("video_url",t.url).trigger("paste");e.addClass("tutor-has-video")});a.open()})})}};var r={};function y(t){var e=r[t];if(e!==undefined){return e.exports}var o=r[t]={exports:{}};a[t](o,o.exports,y);return o.exports}var t={};(()=>{"use strict";var t=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"},{text:"Go",value:"go"}];const c=t;window.jQuery(document).ready(function(n){var t=wp.i18n,s=t.__,e=t._x,o=t._n,a=t._nx;n(document).on("click",".open-tutor-assignment-modal, .tutor-create-assignments-btn",function(a){a.preventDefault();var e=n(this);var t=e.hasClass("tutor-create-assignments-btn")?0:e.attr("data-assignment-id");var o=e.closest(".tutor-topics-wrap").data("topic-id");var r=n("#post_ID").val();n.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{assignment_id:t,topic_id:o,course_id:r,action:"tutor_load_assignments_builder_modal"},beforeSend:function t(){e.addClass("is-loading")},success:function t(e){n(".tutor-assignment-modal-wrap .tutor-modal-container").html(e.data.output);n(".tutor-assignment-modal-wrap").addClass("tutor-is-active");var o=tinyMCEPreInit.mceInit.tutor_assignment_editor_config;if(o&&_tutorobject.tutor_pro_url){if(!o.plugins.includes("codesample")){o.plugins="".concat(o.plugins,", codesample");o.codesample_languages=c;o.toolbar1="".concat(o.toolbar1,", codesample")}}tinymce.init(o);tinymce.execCommand("mceRemoveEditor",false,"tutor_assignments_modal_editor");tinyMCE.execCommand("mceAddEditor",false,"tutor_assignments_modal_editor");window.dispatchEvent(new Event(_tutorobject.content_change_event));window.dispatchEvent(new CustomEvent("tutor_modal_shown",{detail:a.target}))},complete:function t(){e.removeClass("is-loading");quicktags({id:"tutor_assignments_modal_editor"})}})});n(document).on("click",".update_assignment_modal_btn",function(t){t.preventDefault();var e=n(this);var o;var a="tutor_assignments_modal_editor";var r=tinyMCE.get(a);if(r){o=r.getContent({format:"raw"})}else{o=n("#"+a).val()}if(o==='<p><br data-mce-bogus="1"></p>'){o=""}var i=n(this).closest(".tutor-modal").find("form.tutor_assignment_modal_form").serializeObject();i.assignment_content=o;n.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:i,beforeSend:function t(){e.addClass("is-loading")},success:function t(e){if(e.success){n("#tutor-course-content-wrap").html(e.data.course_contents);enable_sorting_topic_lesson();n(".tutor-assignment-modal-wrap").removeClass("tutor-is-active");window.dispatchEvent(new Event(window._tutorobject.content_change_event));tutor_toast(s("Success","tutor"),s("Assignment Updated","tutor"),"success")}},complete:function t(){e.removeClass("is-loading")}})})});var e=y(4417);var o=y(7464);var a=y(4498);var d=function t(e,o){var a=wp.i18n.__;var r=e||{},i=r.data,n=i===void 0?{}:i;var s=n.message,u=s===void 0?o||a("Something Went Wrong!","tutor"):s;return u};function w(t){"@babel/helpers - typeof";return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}(function(n){window.enable_sorting_topic_lesson=function(){var t=wp.i18n.__;if(jQuery().sortable){n(".course-contents").sortable({handle:".course-move-handle",start:function t(e,o){o.placeholder.css("visibility","visible")},stop:function t(e,o){console.log("e1",e,o);tutor_sorting_topics_and_lesson()}});n(".tutor-lessons:not(.drop-lessons)").sortable({connectWith:".tutor-lessons",items:"div.course-content-item",start:function t(e,o){o.placeholder.css("visibility","visible")},stop:function t(e,o){tutor_sorting_topics_and_lesson(o)}})}};window.tutor_sorting_topics_and_lesson=function(t){var i={};n(".tutor-topics-wrap").each(function(t,e){var o=n(this);var a=parseInt(o.attr("id").match(/\d+/)[0],10);var r={};o.find(".course-content-item").each(function(t,e){var o=n(this);var a=parseInt(o.attr("id").match(/\d+/)[0],10);r[t]=a});i[t]={topic_id:a,lesson_ids:r}});n("#tutor_topics_lessons_sorting").val(JSON.stringify(i));var e={tutor_topics_lessons_sorting:JSON.stringify(i),action:"tutor_update_course_content_order"};if(t){var o=t.item.closest("[data-topic-id]").attr("data-topic-id");var a=t.item.attr("data-course_content_id");e.content_parent={parent_topic_id:o,content_id:a}}n.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:e,success:function t(e){if(!e.success){tutor_toast(__("Error","tutor"),d(e),"error")}},error:function t(){}})}})(window.jQuery);window.jQuery(document).ready(function(h){var u=wp.i18n.__;enable_sorting_topic_lesson();h(document).on("click",".open-tutor-lesson-modal",function(a){a.preventDefault();var e=h(this);var r=e.attr("data-lesson-id");var i=e.attr("data-topic-id");var t=h("#post_ID").val();h.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{lesson_id:r,topic_id:i,course_id:t,action:"tutor_load_edit_lesson_modal"},beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(e){if(!e.success){tutor_toast(u("Error","tutor"),d(e),"error");return}h(".tutor-lesson-modal-wrap .tutor-modal-container").html(e.data.output);h(".tutor-lesson-modal-wrap").attr({"data-lesson-id":r,"data-topic-id":i});h(".tutor-lesson-modal-wrap").addClass("tutor-is-active");if(h("#wp-tutor_lesson_modal_editor-wrap").hasClass("html-active")){h("#wp-tutor_lesson_modal_editor-wrap").removeClass("html-active")}h("#wp-tutor_lesson_modal_editor-wrap").addClass("tmce-active");var o=tinyMCEPreInit.mceInit.tutor_lesson_editor_config;if(!o){o=tinyMCEPreInit.mceInit.course_description}if(!o.plugins.includes("codesample")){if(o&&_tutorobject.tutor_pro_url){o.plugins="".concat(o.plugins,", codesample");o.codesample_languages=c;o.toolbar1="".concat(o.toolbar1,", codesample")}}tinymce.init(o);tinymce.execCommand("mceRemoveEditor",false,"tutor_lesson_modal_editor");tinyMCE.execCommand("mceAddEditor",false,"tutor_lesson_modal_editor");window.dispatchEvent(new Event(_tutorobject.content_change_event));window.dispatchEvent(new CustomEvent("tutor_modal_shown",{detail:a.target}))},complete:function t(){e.removeClass("is-loading").attr("disabled",false);quicktags({id:"tutor_lesson_modal_editor"})}})});h(document).on("change",".tutor_lesson_video_source",function(t){var e=h(this).val();h(this).nextAll().hide().filter(".video_source_wrap_"+e).show();h(this).prevAll().filter("[data-video_source]").attr("data-video_source",e)});h(document).on("click",".update_lesson_modal_btn",function(t){t.preventDefault();var o=h(this);var e;var a="tutor_lesson_modal_editor";var r=tinyMCE.get(a);var i=document.getElementById("wp-tutor_lesson_modal_editor-wrap");var n=i.classList.contains("html-active");if(r){e=r.getContent({format:"raw"})}else{e=h("#"+a).val()}if(e==='<p><br data-mce-bogus="1"></p>'){e=""}var s=h(this).closest(".tutor-modal").find("form").serializeObject();s.lesson_content=e;s.is_html_active=n;h.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:s,beforeSend:function t(){o.addClass("is-loading").attr("disabled",true)},success:function t(e){if(e.success){h("#tutor-course-content-wrap").html(e.data.course_contents);enable_sorting_topic_lesson();o.closest(".tutor-modal").removeClass("tutor-is-active");tutor_toast(u("Success","tutor"),u("Lesson Updated","tutor"),"success");window.dispatchEvent(new Event(_tutorobject.content_change_event))}},complete:function t(){o.removeClass("is-loading").attr("disabled",false)}})});var t=[".video_source_wrap_external_url input",".video_source_wrap_vimeo input",".video_source_wrap_youtube input",".video_source_wrap_html5 input.input_source_video_id"].join(",");var o;h(document).on("blur",t,function(){var t=h(this).val();var e=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(t&&e.test(t)==false){h(this).val("");tutor_toast("Error!",u("Invalid Video URL","tutor"),"error")}}).on("paste",t,function(t){t.stopImmediatePropagation();var u=h(this).closest(".tutor-lesson-modal-wrap").find(".tutor-option-field-video-duration");var o=u.find("label");var e=h(this).hasClass("input_source_video_id");var a=h(this).data("autofill_url");h(this).data("autofill_url",null);var r=e?h(this).data("video_url"):a||t.originalEvent.clipboardData.getData("text");var i=function t(e){if(!e){o.find("img").remove();return}if(o.find("img").length==0){o.append(' <img src="'+window._tutorobject.loading_icon_url+'" style="display:inline-block"/>')}};var n=function t(e){var o=Math.floor(e/3600);var a=Math.floor((e-o*3600)/60);var r=Math.round(e-o*3600-a*60);if(o<10){o="0"+o}if(a<10){a="0"+a}if(r<10){r="0"+r}var i=[o,a,r];var n=u.find("input");for(var s=0;s<3;s++){n.eq(s).val(i[s])}};var s=function t(e){var o=e.match(/PT(\d+H)?(\d+M)?(\d+S)?/);o=o.slice(1).map(function(t){if(t!=null){return t.replace(/\D/,"")}});var a=parseInt(o[0])||0;var r=parseInt(o[1])||0;var i=parseInt(o[2])||0;return a*3600+r*60+i};if(e||h(this).parent().hasClass("video_source_wrap_external_url")){var c=document.createElement("video");c.addEventListener("loadedmetadata",function(){n(c.duration);i(false)});i(true);c.src=r}else if(h(this).parent().hasClass("video_source_wrap_vimeo")){var d=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;var l=r.match(d);var _=l?l[5]:null;var p=_tutorobject.is_ssl?"s":"";var v="http".concat(p,"://vimeo.com/api/v2/video/").concat(_,"/json");if(_){i(true);h.getJSON(v,function(t){if(Array.isArray(t)&&t[0]&&t[0].duration!==undefined){n(t[0].duration)}i(false)})}}else if(h(this).parent().hasClass("video_source_wrap_youtube")){var d=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;var l=r.match(d);var _=l&&l[7].length==11?l[7]:false;var f=h(this).data("youtube_api_key");if(_&&f){var m="https://www.googleapis.com/youtube/v3/videos?id="+_+"&key="+f+"&part=contentDetails";i(true);h.getJSON(m,function(t){if(w(t)=="object"&&t.items&&t.items[0]&&t.items[0].contentDetails&&t.items[0].contentDetails.duration){n(s(t.items[0].contentDetails.duration))}i(false)})}}}).on("input",t,function(){if(o){clearTimeout(o)}var e=h(this);o=setTimeout(function(){var t=e.val();t=t?t.trim():"";console.log("Trigger",t);t?e.data("autofill_url",t).trigger("paste"):0},700)})});function r(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var a="bold italic underline  link unlink ".concat(o);tinymce.init({selector:t,height:250,plugins:e,toolbar:a,menu:{},menubar:{},relative_urls:false})}const l=r;function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,a)}return o}function g(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function n(t,e,o){if(e in t){Object.defineProperty(t,e,{value:o,enumerable:true,configurable:true,writable:true})}else{t[e]=o}return t}window.jQuery(document).ready(function(p){var v=wp.i18n.__;var f=function t(e,o,a){var r=e.find(".tutor-modal-steps");var i=r.find('li[data-tab="'+e.attr("data-target")+'"]');var n=i.next();var s=i.prev();if(!o){var u=s.data("tab");s.length?e.attr("data-target",u):0;a?r.find('li[data-tab="'+u+'"]').nextAll().removeClass("tutor-is-completed"):0;return}if(n.length){n.addClass("tutor-is-completed");e.attr("data-target",n.data("tab"));return true}tutor_toast(v("Success","tutor"),v("Quiz Updated"),"success");e.removeClass("tutor-is-active");return null};var m=function t(){p(".tutor-field-slider").each(function(){var t=p(this);var a=t.closest(".tutor-field-type-slider").find('input[type="hidden"]');var r=t.closest(".tutor-field-type-slider").find(".tutor-field-type-slider-value");var e=parseFloat(t.closest(".tutor-field-type-slider").attr("data-min"));var o=parseFloat(t.closest(".tutor-field-type-slider").attr("data-max"));t.slider({range:"max",min:e,max:o,value:a.val(),slide:function t(e,o){r.text(o.value);a.val(o.value)}})})};function a(){var r={};p(".quiz-builder-question-wrap").each(function(t,e){var o=p(this);var a=parseInt(o.attr("data-question-id"),10);r[t]=a});p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{sorted_question_ids:r,action:"tutor_quiz_question_sorting"}})}function h(){if(jQuery().sortable){p(".quiz-builder-questions-wrap").sortable({handle:".question-sorting",start:function t(e,o){o.placeholder.css("visibility","visible")},stop:function t(e,o){a()}})}}function u(){if(jQuery().sortable){p("#tutor_quiz_question_answers").sortable({handle:".tutor-quiz-answer-sort-icon",start:function t(e,o){o.placeholder.css("visibility","visible")},stop:function t(e,o){r()}})}}function r(){var r={};p(".tutor-quiz-answer-wrap").each(function(t,e){var o=p(this);var a=parseInt(o.attr("data-answer-id"),10);r[t]=a});p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{sorted_answer_ids:r,action:"tutor_quiz_answer_sorting"}})}function t(){var t={init:function t(){p(document).on("click",".question-type-select .tutor-select-option",function(t){t.preventDefault();var e=p(this);if(e.attr("data-is-pro")!=="true"){var o=e.html().trim();e.closest(".question-type-select").find(".select-header .lead-option").html(o);e.closest(".question-type-select").find(".select-header input.tutor_select_value_holder").val(e.attr("data-value")).trigger("change");e.closest(".tutor-select-options").hide()}else{alert("Tutor Pro version required")}});p(document).on("click",".question-type-select .select-header",function(t){t.preventDefault();var e=p(this);e.closest(".question-type-select").find(".tutor-select-options").slideToggle()});this.setValue();this.hideOnOutSideClick()},setValue:function t(){p(".question-type-select").each(function(){var t=p(this);var e=t.find(".tutor-select-option");if(e.length){e.each(function(){var t=p(this);if(t.attr("data-selected")==="selected"){var e=t.html().trim();t.closest(".question-type-select").find(".select-header .lead-option").html(e);t.closest(".question-type-select").find(".select-header input.tutor_select_value_holder").val(t.attr("data-value"))}})}})},hideOnOutSideClick:function t(){p(document).mouseup(function(t){var e=p(".tutor-select-options");if(!p(t.target).closest(".select-header").length&&!e.is(t.target)&&e.has(t.target).length===0){e.hide()}})},reInit:function t(){this.setValue()}};return t}t().init();m();p(document).on("click",".tutor-add-quiz-btn, .open-tutor-quiz-modal, .back-to-quiz-questions-btn",function(t){t.preventDefault();if(t.originalEvent){var e=p(this).closest("#tutor-quiz-question-wrapper").find(".tutor_select_value_holder").val();if(["single_choice","multiple_choice"].indexOf(e)>-1){p(".quiz-modal-question-save-btn").trigger("click");return}}var o=p(this);var a=p(this).hasClass("open-tutor-quiz-modal")||p(this).hasClass("tutor-add-quiz-btn");var r=p(".tutor-modal.tutor-quiz-builder-modal-wrap");var i=o.hasClass("tutor-add-quiz-btn")?0:o.attr("data-quiz-id");var n=o.closest(".tutor-topics-wrap").data("topic-id");var s=p("#post_ID").val();p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_id:i,topic_id:n,course_id:s,action:"tutor_load_quiz_builder_modal"},beforeSend:function t(){o.addClass("is-loading").attr("disabled",true)},success:function t(e){if(!e.success){tutor_toast("Error",d(e),"error");return}p(".tutor-quiz-builder-modal-wrap").addClass("tutor-is-active");p(".tutor-quiz-builder-modal-wrap .tutor-modal-container").html(e.data.output);p(".tutor-quiz-builder-modal-wrap").attr("data-quiz-id",i).attr("data-topic-id-of-quiz",n);r.removeClass("tutor-has-question-from");if(a){f(r,false,true);f(r,false,true)}window.dispatchEvent(new Event(_tutorobject.content_change_event));m();h()},complete:function t(){o.removeClass("is-loading").attr("disabled",false)}})});p(document).on("click",".tutor-quiz-builder-modal-wrap button",function(t){var e=p(this);var o=e.closest(".tutor-modal");var a=o.attr("data-target");var r=p(this).data("action");if(r=="back"){f(o,false);return}else if(r!="next"){return}var i=p("#post_ID").val();var n=p(this).closest(".tutor-quiz-builder-modal-wrap").attr("data-topic-id-of-quiz");var s=o.find('[name="quiz_id"]').val();if(a=="quiz-builder-tab-quiz-info"||a=="quiz-builder-tab-settings"){var u=o.find('[name="quiz_title"]').val();var c=o.find('[name="quiz_description"]').val();var d=o.find("#quiz-builder-tab-settings :input, #quiz-builder-tab-advanced-options :input").serializeObject();var l={quiz_title:u,course_id:i,quiz_id:s,topic_id:n};for(var _ in l){if(!l[_]){if(_=="quiz_title"){tutor_toast("Error!",v("Quiz title required","tutor"),"error")}return}}p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:g(g(g({},d),l),{},{quiz_description:c,action:"tutor_quiz_save"}),beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(e){if(s&&s!=0){p("#tutor-quiz-"+s).replaceWith(e.data.output_quiz_row)}else{p("#tutor-topics-"+n+" .tutor-lessons").append(e.data.output_quiz_row)}p(".tutor-quiz-builder-modal-wrap .tutor-modal-container").html(e.data.output);window.dispatchEvent(new Event(_tutorobject.content_change_event));m();f(o,true);h();p('[name="quiz_option[feedback_mode]"]').trigger("change")},complete:function t(){e.removeClass("is-loading").attr("disabled",false)}})}else if(a=="quiz-builder-tab-questions"){f(o,true)}});p(document).on("click",".tutor-quiz-open-question-form",function(o){o.preventDefault();var e=p(this);var a=e.closest(".tutor-modal");var t=a.find('[name="quiz_id"]').val();var r=a.find('[name="topic_id"]').val();var i=p("#post_ID").val();var n=e.attr("data-question-id");var s={quiz_id:t,topic_id:r,course_id:i,question_id:n,action:"tutor_quiz_builder_get_question_form"};p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:s,beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(e){a.find(".tutor-modal-container").html(e.data.output);a.addClass("tutor-has-question-from");u();if(_tutorobject.tutor_pro_url){if(e.data.output){tinyMCE.remove("textarea#tutor_quiz_desc_text_editor");l("textarea#tutor_quiz_desc_text_editor","codesample image","codesample image");if(document.getElementById("tutor_answer_explanation")){tinyMCE.remove("textarea#tutor_answer_explanation");l("textarea#tutor_answer_explanation","codesample image","codesample image")}}}window.dispatchEvent(new CustomEvent("tutor_modal_shown",{detail:o.target}))},complete:function t(){e.removeClass("is-loading").attr("disabled",false)}})});p(document).on("click",".tutor-quiz-question-trash",function(t){t.preventDefault();var e=p(this);var o=e.attr("data-question-id");p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{question_id:o,action:"tutor_quiz_builder_question_delete"},beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(){e.closest(".quiz-builder-question-wrap").fadeOut(function(){p(this).remove()})},complete:function t(){e.removeClass("is-loading").attr("disabled",false)}})});p(document).on("click",".add_question_answers_option, .tutor-quiz-answer-edit a",function(t){t.preventDefault();var e=p(this);var o=e.closest("[data-question-id]").attr("data-question-id");var a=p(this).hasClass("add_question_answers_option")?null:e.closest(".tutor-quiz-answer-wrap").attr("data-answer-id");var r=p("#tutor-quiz-question-wrapper :input").serializeObject();r.question_id=o;r.answer_id=a;r.action="tutor_quiz_question_answer_editor";p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:r,beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(e){p("#tutor_quiz_builder_answer_wrapper").html(e.data.output)},complete:function t(){e.removeClass("is-loading").attr("disabled",false)}})});p(document).on("click",".quiz-modal-question-save-btn",function(t){t.preventDefault();var e=p(this);var o=e.closest(".tutor-modal");var a=p("#tutor-quiz-question-wrapper :input").serializeObject();a.action="tutor_quiz_modal_update_question";if(_tutorobject.tutor_pro_url){var r=a.tutor_quiz_question_id;var i="tutor_quiz_desc_text_editor";var n="tutor_answer_explanation";if(tinyMCE.get(i)){var s;a["tutor_quiz_question["+r+"][question_description]"]=(s=tinyMCE.get(i))===null||s===void 0?void 0:s.getContent({format:"raw"})}if(tinyMCE.get(n)){var u;a["answer_explanation"]=(u=tinyMCE.get(n))===null||u===void 0?void 0:u.getContent({format:"raw"})}}p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:a,beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(e){if(e.success){o.find(".back-to-quiz-questions-btn").trigger("click")}else{tutor_toast("Error",d(e),"error")}},complete:function t(){setTimeout(function(){return e.removeClass("is-loading").attr("disabled",false)},2e3)}})});p(document).on("change","input.tutor_select_value_holder",function(t){var o=p("#tutor_quiz_builder_answer_wrapper");o.html('<div style="text-align:center">\n                <span class="is-loading"></span>\n            </div>');o.get(0).scrollIntoView({block:"center",behavior:"smooth"});var e=p(this).closest("[data-question-id]").attr("data-question-id");var a=p(this).val();p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{question_id:e,question_type:a,action:"tutor_quiz_builder_change_type"},success:function t(e){if(e.success){p("#tutor_quiz_builder_answer_wrapper").html(e.data.output);o.get(0).scrollIntoView({block:"center",behavior:"smooth"});u()}else{tutor_toast("Error",d(e),"error")}}})});p(document).on("click","#quiz-answer-save-btn",function(t){t.preventDefault();var e=p(this);var o=p("#tutor-quiz-question-wrapper :input").serializeObject();o.action=o.tutor_quiz_answer_id?"tutor_update_quiz_answer_options":"tutor_save_quiz_answer_options";p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:o,beforeSend:function t(){e.addClass("is-loading").attr("disabled",true)},success:function t(e){if(!e.success){tutor_toast("Error",d(e),"error");return}p(".tutor_select_value_holder").trigger("change")},complete:function t(){e.removeClass("is-loading").attr("disabled",false)}})});p(document).on("change",".tutor-quiz-answers-mark-correct-wrap input",function(t){t.preventDefault();var e=p(this);var o=e.val();var a=1;if(!e.prop("checked")){a=0}p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:o,inputValue:a,action:"tutor_mark_answer_as_correct"}})});p(document).on("click",".tutor-quiz-answer-trash-wrap a.answer-trash-btn",function(t){t.preventDefault();var e=p(this);var o=e.attr("data-answer-id");p.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:o,action:"tutor_quiz_builder_delete_answer"},beforeSend:function t(){e.closest(".tutor-quiz-answer-wrap").remove()}})});p(document).on("click",".tutor-quiz-advance-settings .tutor-quiz-advance-header",function(){p(this).parent().toggleClass("tutor-is-active").find(".tutor-icon-angle-down").toggleClass("tutor-icon-angle-up")});p(document).on("change",'[name="quiz_option[feedback_mode]"]',function(){if(p(this).prop("checked")){p(this).parent().addClass("tutor-bg-white").removeClass("tutor-bg-transparent").siblings().filter(".tutor-radio-select").addClass("tutor-bg-transparent").removeClass("tutor-bg-white");var t=p(this).val()=="retry";p(".tutor-attempt-allowed-slider")[t?"show":"hide"]();p(".tutor-pass-required-field")[t?"show":"hide"]()}})});var s=y(8005);var u=y(3008);var _=y(7509);var p=function t(){if(jQuery().select2){jQuery(".select2_multiselect").select2({dropdownCssClass:"increasezindex"})}};window.addEventListener("DOMContentLoaded",p);window.addEventListener(_tutorobject.content_change_event,p);window.addEventListener(_tutorobject.content_change_event,function(){return console.log(_tutorobject.content_change_event)});function v(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:255;var e=arguments.length>1?arguments[1]:undefined;return t-(((e||{}).value||{}).length||0)}var f=255;var m=document.getElementById("tutor-course-create-title");var h=m===null||m===void 0?void 0:m.previousElementSibling;var b=document.querySelector("#tutor-course-create-title-tooltip-wrapper .tooltip-txt");if(h){h.innerHTML=v(f,m)}if(m&&b){document.addEventListener("click",function(t){if(t.target===m){if(m===document.activeElement){b.style.opacity="1";b.style.visibility="visible"}}else{b.style.opacity="0";b.style.visibility="hidden"}});m.addEventListener("keyup",function(t){var e=v(f,m);h.innerHTML=e})}})()})();