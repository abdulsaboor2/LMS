jQuery($=>{"use strict";var c,o=[],a=function(){var t=document;return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))};function n(t,i,e,n){var t=t.clone().removeClass("cm-location"),a=(t.find(".menu-location-title").empty(),t.find("select").attr("name").match(/menu-locations\[(.*)\]/)[1]),e=(null==i&&(void 0===o[a]&&(o[a]=parseInt($(function(t){var i,e=[];for(i in t)t.hasOwnProperty(i)&&e.push(i);return e}(themify_cm.options[a])).last()[0]),$.isNumeric(o[a])||(o[a]=1)),i=o[a]++),t.find("select").find('option[value="0"]').text(themify_cm.lang.disable_menu).before('<option value=""></option>').end().val(e).attr("name","themify_cm["+a+"]["+i+"][menu]"),(t=function(t,i,e){return e=e||"",t.find(".locations-row-links").empty().html('<input type="hidden" name="'+i+"\" value='"+e+'\' /><a href="#" class="themify-cm-conditions">'+themify_cm.lang.conditions+'</a> <a class="themify-cm-remove" href="#">x</a>'),t}(t,"themify_cm["+a+"]["+i+"][condition]",n)).insertBefore(jQuery('.menu-locations tr[data-menu="'+a+'"]')),$(".menu-location-menus select").length),n=$(".cm-replacement-button").length+1;t.find(".menu-location-menus").attr("data-item",a+i),e===n&&$(".themify-cm-conditions-container:first").addClass("themify-cm-conditions-container-"+a+i).data("item",a+i),n<e&&$(".themify-cm-conditions-container:first").clone().removeClass().addClass("themify-cm-conditions-container themify-admin-lightbox tf_clearfix themify-cm-conditions-container-"+a+i).data("item",a+i).insertAfter(".themify-cm-conditions-container:last"),$(".lightbox_container",".themify-cm-conditions-container-"+a+i).html("")}$(".menu-locations .locations-row-links").empty(),$("body").on("click",".themify-cm-conditions",function(t){t.preventDefault();var i=$(this),t=i.html(),e=(i.html('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>'+t),c=$(this).prev(),$(document).scrollTop()+80),n=$(".themify-cm-conditions-container-"+$(this).parents(".menu-location-menus").data("item"));return n.hasClass("is-loaded")?($(".tb_slider_loader_wrapper",i).remove(),$("#themify-cm-overlay").show(),n.show().css("top",a()).animate({top:e},800),$("#visibility-tabs",n).tabs(),$("#visibility-tabs .themify-visibility-inner-tabs",n).tabs()):$.ajax({type:"POST",url:ajaxurl,data:{action:"themify_cm_get_conditions",selected:c.val()},success(t){$(".tb_slider_loader_wrapper",i).remove(),$("#themify-cm-overlay").show(),$(".lightbox_container",n).append(t),n.show().css("top",a()).animate({top:e},800),$("#visibility-tabs",n).tabs(),$("#visibility-tabs .themify-visibility-inner-tabs",n).tabs()}}),!1}).on("click","#visibility-tabs .themify-visibility-tab",function(t){t.preventDefault();var i,e,n,a,o,s=$(this),t=$("#themify-cm-original-conditions");s.data("active")||(i=s.data("type"),e=s.parents("#visibility-tabs").find(".themify-visibility-type-options[data-type="+i+"]"),n=s.parents(".themify-cm-conditions-container").data("item"),n=$(".menu-location-menus[data-item="+n+"] .locations-row-links input").val(),a=function(){var t=$('.themify-visibility-options[data-type="'+this.dataset.type+'"] .themify-visibility-items-page input');this.checked?t.bind("change",{type:this.dataset.type},o):t.unbind("change",o)},o=function(t){t=$('.themify-visibility-options[data-type="'+t.data.type+'"] input[data-parent="'+this.dataset.slug+'"]');t.length&&t.prop("checked",this.checked).trigger("change")},$.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_inner_page",type:i,selected:n,original_values:t.val()},beforeSend:function(){e.html('<div class="tb_slider_loader"></div>')},success:function(t){t=JSON.parse(t),e.html(t.html),"page"!==i&&"category"!==i||document.querySelector(".tf_cm_select_sub input[data-type="+i+"]").addEventListener("change",a),s.data("active","on"),$("#themify-cm-original-conditions").val(t.original_values)}}))}).on("click",".themify-visibility-pagination a.page-numbers",function(t){t.preventDefault();var i=(t=$(this)).parents(".themify-visibility-options"),e=t.parents(".themify-visibility-items-inner"),n=$(".themify-visibility-pagination",e),a=parseFloat($(".themify-visibility-pagination .current",e).text()),o=1,s=(t.hasClass("next")?o=a+1:t.hasClass("prev")?o=a-1:t.hasClass("page-numbers")&&(o=parseFloat(t.text())),$(".themify-visibility-items-inner",i));$.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_page_pagination",current_page:o,num_of_pages:e.data("pages")},beforeSend(){$(".tb_slider_loader",i).remove(),n.hide(),s.append('<div class="tb_slider_loader"></div>')},success(t){$(".tb_slider_loader",i).remove(),$(".themify-visibility-items-page-"+o,e).removeClass("is-hidden"),n.html(t).show()}})}).on("click",".themify-cm-close, #themify-cm-overlay",function(t){t.preventDefault();var i=$(this).parents(".themify-cm-conditions-container");return i.animate({top:a()},800,function(){$("#themify-cm-overlay").hide(),i.hide().addClass("is-loaded")}),!1}).on("click",".themify-mc-add-assignment",function(){return n($("#locations-"+$(this).closest("tr").attr("data-menu")).closest("tr")),!1}).on("click",".themify-cm-save",function(){for(var t=$(this).parents(".themify-cm-conditions-container"),i=t.data("item"),e=$("form",t).serialize(),n=""===(n=$("#themify-cm-original-conditions",t).val())?[]:n.split("&"),a=""===e?[]:e.split("&"),e=n.concat(a).concat(),o=0;o<e.length;++o)for(var s=o+1;s<e.length;++s)e[o]===e[s]&&e.splice(s--,1);return e=e.join("&"),c.val(e),$(".menu-location-menus[data-item="+i+"]").val(e),$(".themify-cm-close",t).click(),!1}).on("click",".themify-cm-remove",function(){$(this).closest("tr").fadeOut(function(){$(this).remove()});var t=$(this).closest(".menu-location-menus").data("item");return 1<$(".menu-location-menus[data-item]").length?$(".themify-cm-conditions-container-"+t).remove():$(".themify-cm-conditions-container").removeClass().addClass("themify-cm-conditions-container themify-admin-lightbox tf_clearfix"),!1}).on("click",".themify-cm-conditions-container .uncheck-all",function(){$(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');var t=$(this).parents(".themify-cm-conditions-container"),i=t.data("item");return $(".menu-location-menus[data-item="+i+"] .locations-row-links input[type=hidden]").val(""),$("#themify-cm-original-conditions",t).val(""),$("input:checkbox",t).removeAttr("checked"),$(this).parent().find(".tb_slider_loader_wrapper").remove(),$(".themify_all_condition_checked",t).removeClass("themify_all_condition_checked"),!1}).on("click",".themify-cm-conditions-container .themify_apply_all_conditions",function(){var t=$(this),i=t.parents(".themify-visibility-inner-tab").find(".themify-visibility-items-inner");t.prop("checked")?i.addClass("themify_all_condition_checked"):i.removeClass("themify_all_condition_checked")}),$.each(themify_cm.nav_menus,function(t,i){$("#locations-"+i).closest("tr").after('<tr class="cm-replacement-button" data-menu="'+i+'"><td>&nbsp;</td><td><a href="#" class="themify-mc-add-assignment">'+themify_cm.lang.add_assignment+"</a></td></tr>")}),$.each(themify_cm.options,function(e,t){"object"==typeof t&&$.each(t,function(t,i){n($("#locations-"+e).closest("tr"),t,i.menu,i.condition),o[e]=++t})}),$("#themify-cm-about").appendTo("p.button-controls")});